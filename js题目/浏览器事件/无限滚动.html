<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
</head>

<body>

  <h1>Scroll me</h1>

  <script>

    function populate() {
      while (true) {

        if (document.documentElement.scrollHeight > document.documentElement.clientHeight) {
          break;
        }

        let p = document.createElement('p');
        p.innerText = new Date();
        document.body.append(p);

      }
      
      let windowClientHeight = document.documentElement.clientHeight;
      let scrollHeight = document.documentElement.scrollHeight;

      if (document.documentElement.scrollTop > oldScrollTop) {
        if (document.documentElement.scrollTop + windowClientHeight > scrollHeight - 100) {
          let p = document.createElement('p');
          p.innerText = new Date();
          document.body.append(p);
        }
      }

      oldScrollTop = document.documentElement.scrollTop;
    }


    let oldScrollTop = 0;

    window.addEventListener('scroll', populate);
    populate();

  </script>

</body>

</html>